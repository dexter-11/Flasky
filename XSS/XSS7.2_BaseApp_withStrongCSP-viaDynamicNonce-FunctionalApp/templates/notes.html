{% extends 'base.html' %}
{% block content %}
<h2>Sticky Note (⚠️ Client-side Stored XSS - DOM-based)</h2>
<form id="noteForm">
  <label>Write a note (stored in localStorage):</label>
  <textarea id="noteInput" rows="3"></textarea>
  <div class="spacer"></div>
  <button type="submit">Save</button>
</form>

<div class="spacer"></div>
<h3>Your Saved Note:</h3>
<div id="noteOutput"></div>

<script nonce="{{ nonce }}">
  const saved = localStorage.getItem("note");
  if (saved) {
    document.getElementById("noteOutput").innerHTML = saved;
  }

  document.getElementById("noteForm").addEventListener("submit", e => {
    e.preventDefault();
    const val = document.getElementById("noteInput").value;
    localStorage.setItem("note", val);
    location.reload();
  });
</script>
{% endblock %}